<!DOCTYPE html>
<html>
<head>
    <title>Zyore Shop | Checkout</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

    <header>
        <h1 style="text-transform: uppercase;">Zyore Shop</h1>
        <nav>
            <a href="products.html">Back to Store</a>
        </nav>
    </header>

    <div class="container">
        <div class="card">
            <h2 style="text-align:center; color: var(--secondary-color);">Secure Checkout</h2>
            
            <form id="checkout-form">
                
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" name="Name" placeholder="Your Name" required>
                </div>

                <div class="form-group">
                    <label>Phone Number</label>
                    <div class="input-group">
                        <input type="text" value="+880" class="country-code" readonly 
                               style="background:#1a1a2e; color:#777; text-align:center; border:1px solid #444;">
                        <input type="tel" id="phone-number" placeholder="1712345678" required>
                        <input type="hidden" name="Phone" id="full-phone">
                    </div>
                </div>

                <div class="form-group">
                    <label>District</label>
                    <input list="district-list" id="district-input" name="District" placeholder="Type to search (e.g. Netrokona)" required oninput="loadUpazilas()">
                    
                    <datalist id="district-list">
                        </datalist>
                </div>

                <div class="form-group">
                    <label>Area / Upazila</label>
                    <select id="upazila-select" name="Area" required disabled>
                        <option value="">Select District First</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>House / Road / Village</label>
                    <textarea name="Address" rows="2" placeholder="House 12, Road 5..." required></textarea>
                </div>

                <div class="form-group">
                    <label>Payment Method</label>
                    <input type="text" value="Cash on Delivery" readonly 
                           style="background:#232336; color:#4cd137; font-weight:bold; border:1px solid #4cd137;">
                    <input type="hidden" name="Payment" value="Cash on Delivery">
                </div>

                <input type="hidden" name="Total" id="hidden-total">
                <input type="hidden" name="Items" id="hidden-items">
                <input type="hidden" name="Email" value="no-email@provided.com">

                <hr style="border: 1px solid #333; margin: 20px 0;">

                <button type="submit" class="btn btn-glow" style="width: 100%;">Confirm Order</button>
            </form>
        </div>
    </div>

    <script>
        // --- 1. DATABASE OF ALL 64 DISTRICTS ---
        const bdData = {
            "Barguna": ["Amtali", "Bamna", "Barguna Sadar", "Betagi", "Patharghata", "Taltali"],
            "Barishal": ["Agailjhara", "Babuganj", "Bakerganj", "Banaripara", "Barishal Sadar", "Gaurnadi", "Hizla", "Mehendiganj", "Muladi", "Wazirpur"],
            "Bhola": ["Bhola Sadar", "Burhanuddin", "Char Fasson", "Daulatkhan", "Lalmohan", "Manpura", "Tazumuddin"],
            "Jhalokati": ["Jhalokati Sadar", "Kathalia", "Nalchity", "Rajapur"],
            "Patuakhali": ["Bauphal", "Dashmina", "Dumki", "Galachipa", "Kalapara", "Mirzaganj", "Patuakhali Sadar", "Rangabali"],
            "Pirojpur": ["Bhandaria", "Kawkhali", "Mathbaria", "Nazirpur", "Nesarabad", "Pirojpur Sadar", "Indurkani"],
            "Bandarban": ["Ali Kadam", "Bandarban Sadar", "Lama", "Naikhongchhari", "Rowangchhari", "Ruma", "Thanchi"],
            "Brahmanbaria": ["Akhaura", "Ashuganj", "Bancharampur", "Bijoynagar", "Brahmanbaria Sadar", "Kasba", "Nabinagar", "Nasirnagar", "Sarail"],
            "Chandpur": ["Chandpur Sadar", "Faridganj", "Haimchar", "Haziganj", "Kachua", "Matlab Dakshin", "Matlab Uttar", "Shahrasti"],
            "Chattogram": ["Anwara", "Banshkhali", "Boalkhali", "Chandanaish", "Chattogram Sadar", "Fatikchhari", "Hathazari", "Karnaphuli", "Lohagara", "Mirsharai", "Patiya", "Rangunia", "Raozan", "Sandwip", "Satkania", "Sitakunda"],
            "Cox's Bazar": ["Chakaria", "Cox's Bazar Sadar", "Kutubdia", "Maheshkhali", "Pekua", "Ramu", "Teknaf", "Ukhia"],
            "Cumilla": ["Barura", "Brahmanpara", "Burichang", "Chandina", "Chauddagram", "Cumilla Adarsha Sadar", "Cumilla Sadar Dakshin", "Daudkandi", "Debidwar", "Homna", "Laksam", "Lalmai", "Manohargonj", "Meghna", "Muradnagar", "Nangalkot", "Titas"],
            "Feni": ["Chhagalnaiya", "Daganbhuiyan", "Feni Sadar", "Fulgazi", "Parshuram", "Sonagazi"],
            "Khagrachhari": ["Dighinala", "Guimara", "Khagrachhari Sadar", "Lakshmichhari", "Mahalchhari", "Manikchhari", "Matiranga", "Panchhari", "Ramgarh"],
            "Lakshmipur": ["Kamalnagar", "Lakshmipur Sadar", "Raipur", "Ramganj", "Ramgati"],
            "Noakhali": ["Begumganj", "Chatkhil", "Companiganj", "Hatiya", "Kabirhat", "Noakhali Sadar", "Senbagh", "Sonaimuri", "Subarnachar"],
            "Rangamati": ["Bagaichhari", "Barkal", "Belaichhari", "Juraichhari", "Kaptai", "Kaukhali", "Langadu", "Naniarchar", "Rajasthali", "Rangamati Sadar"],
            "Dhaka": ["Dhamrai", "Dohar", "Keraniganj", "Nawabganj", "Savar", "Tejgaon Circle"],
            "Faridpur": ["Alfadanga", "Bhanga", "Boalmari", "Charbhadrasan", "Faridpur Sadar", "Madhukhali", "Nagarkanda", "Sadarpur", "Saltha"],
            "Gazipur": ["Gazipur Sadar", "Kaliakair", "Kaliganj", "Kapasia", "Sreepur"],
            "Gopalganj": ["Gopalganj Sadar", "Kashiani", "Kotalipara", "Muksudpur", "Tungipara"],
            "Kishoreganj": ["Austagram", "Bajitpur", "Bhairab", "Hossainpur", "Itna", "Karimganj", "Katiadi", "Kishoreganj Sadar", "Kuliarchar", "Mithamain", "Nikli", "Pakundia", "Tarail"],
            "Madaripur": ["Kalkini", "Madaripur Sadar", "Rajoir", "Shibchar"],
            "Manikganj": ["Daulatpur", "Ghior", "Harirampur", "Manikganj Sadar", "Saturia", "Shivalaya", "Singair"],
            "Munshiganj": ["Gazaria", "Lohajang", "Munshiganj Sadar", "Sirajdikhan", "Sreenagar", "Tongibari"],
            "Narayanganj": ["Araihazar", "Bandar", "Narayanganj Sadar", "Rupganj", "Sonargaon"],
            "Narsingdi": ["Belabo", "Monohardi", "Narsingdi Sadar", "Palash", "Raipura", "Shibpur"],
            "Rajbari": ["Baliakandi", "Goalandaghat", "Kalukhali", "Pangsha", "Rajbari Sadar"],
            "Shariatpur": ["Bhedarganj", "Damudya", "Gosairhat", "Naria", "Shariatpur Sadar", "Zajira"],
            "Tangail": ["Basail", "Bhuapur", "Delduar", "Dhanbari", "Ghatail", "Gopalpur", "Kalihati", "Madhupur", "Mirzapur", "Nagarpur", "Sakhipur", "Tangail Sadar"],
            "Bagerhat": ["Bagerhat Sadar", "Chitalmari", "Fakirhat", "Kachua", "Mollahat", "Mongla", "Morrelganj", "Rampal", "Sarankhola"],
            "Chuadanga": ["Alamdanga", "Chuadanga Sadar", "Damurhuda", "Jibannagar"],
            "Jashore": ["Abhaynagar", "Bagherpara", "Chaugachha", "Jashore Sadar", "Jhikargachha", "Keshabpur", "Manirampur", "Sharsha"],
            "Jhenaidah": ["Harinakunda", "Jhenaidah Sadar", "Kaliganj", "Kotchandpur", "Maheshpur", "Shailkupa"],
            "Khulna": ["Batiaghata", "Dacope", "Dighalia", "Dumuria", "Koyra", "Paikgachha", "Phultala", "Rupsha", "Terokhada"],
            "Kushtia": ["Bheramara", "Daulatpur", "Khoksa", "Kumarkhali", "Kushtia Sadar", "Mirpur"],
            "Magura": ["Magura Sadar", "Mohammadpur", "Shalikha", "Sreepur"],
            "Meherpur": ["Gangni", "Meherpur Sadar", "Mujibnagar"],
            "Narail": ["Kalia", "Lohagara", "Narail Sadar"],
            "Satkhira": ["Assasuni", "Debhata", "Kalaroa", "Kaliganj", "Satkhira Sadar", "Shyamnagar", "Tala"],
            "Jamalpur": ["Bakshiganj", "Dewanganj", "Islampur", "Jamalpur Sadar", "Madarganj", "Melandaha", "Sarishabari"],
            "Mymensingh": ["Bhaluka", "Dhobaura", "Fulbaria", "Gafargaon", "Gouripur", "Haluaghat", "Ishwarganj", "Mymensingh Sadar", "Muktagachha", "Nandail", "Phulpur", "Tara Khanda", "Trishal"],
            "Netrokona": ["Atpara", "Barhatta", "Durgapur", "Khaliajuri", "Kalmakanda", "Kendua", "Madan", "Mohanganj", "Netrokona Sadar", "Purbadhala"],
            "Sherpur": ["Jhenaigati", "Nakla", "Nalitabari", "Sherpur Sadar", "Sreebardi"],
            "Bogura": ["Adamdighi", "Bogura Sadar", "Dhunat", "Dhupchanchia", "Gabtali", "Kahaloo", "Nandigram", "Sariakandi", "Shajahanpur", "Sherpur", "Shibganj", "Sonatala"],
            "Chapainawabganj": ["Bholahat", "Chapainawabganj Sadar", "Gomastapur", "Nachol", "Shibganj"],
            "Joypurhat": ["Akkelpur", "Joypurhat Sadar", "Kalai", "Khetlal", "Panchbibi"],
            "Naogaon": ["Atrai", "Badalgachhi", "Dhamoirhat", "Manda", "Mohadevpur", "Naogaon Sadar", "Niamatpur", "Patnitala", "Porsha", "Raninagar", "Sapahar"],
            "Natore": ["Bagatipara", "Baraigram", "Gurudaspur", "Lalpur", "Natore Sadar", "Naldanga", "Singra"],
            "Pabna": ["Atgharia", "Bera", "Bhangura", "Chatmohar", "Faridpur", "Ishwardi", "Pabna Sadar", "Santhia", "Sujanagar"],
            "Rajshahi": ["Bagha", "Bagmara", "Charghat", "Durgapur", "Godagari", "Mohanpur", "Paba", "Puthia", "Tanore"],
            "Sirajganj": ["Belkuchi", "Chauhali", "Kamarkhanda", "Kazipur", "Raiganj", "Shahjadpur", "Sirajganj Sadar", "Tarash", "Ullahpara"],
            "Dinajpur": ["Birampur", "Birganj", "Biral", "Bochaganj", "Chirirbandar", "Dinajpur Sadar", "Ghoraghat", "Hakimpur", "Kaharole", "Khansama", "Nawabganj", "Parbatipur", "Fulbari"],
            "Gaibandha": ["Fulchhari", "Gaibandha Sadar", "Gobindaganj", "Palashbari", "Sadullapur", "Saghata", "Sundarganj"],
            "Kurigram": ["Bhurungamari", "Char Rajibpur", "Chilmari", "Fulbari", "Kurigram Sadar", "Nageshwari", "Phulbari", "Rajarhat", "Raomari", "Ulipur"],
            "Lalmonirhat": ["Aditmari", "Hatibandha", "Kaliganj", "Lalmonirhat Sadar", "Patgram"],
            "Nilphamari": ["Dimla", "Domar", "Jaldhaka", "Kishoreganj", "Nilphamari Sadar", "Saidpur"],
            "Panchagarh": ["Atwari", "Boda", "Debiganj", "Panchagarh Sadar", "Tetulia"],
            "Rangpur": ["Badarganj", "Gangachara", "Kaunia", "Mithapukur", "Pirgachha", "Pirganj", "Rangpur Sadar", "Taraganj"],
            "Thakurgaon": ["Baliadangi", "Haripur", "Pirganj", "Ranisankail", "Thakurgaon Sadar"],
            "Habiganj": ["Ajmiriganj", "Bahubal", "Baniyachong", "Chunarughat", "Habiganj Sadar", "Lakhai", "Madhabpur", "Nabiganj", "Shaistaganj"],
            "Moulvibazar": ["Barlekha", "Juri", "Kamalganj", "Kulaura", "Moulvibazar Sadar", "Rajnagar", "Sreemangal"],
            "Sunamganj": ["Bishwamvarpur", "Chhatak", "Dakshin Sunamganj", "Derai", "Dharmapasha", "Dowarabazar", "Jagannathpur", "Jamalganj", "Sullah", "Sunamganj Sadar", "Tahirpur"],
            "Sylhet": ["Balaganj", "Beanibazar", "Bishwanath", "Companiganj", "Dakshin Surma", "Fenchuganj", "Golapganj", "Gowainghat", "Jaintiapur", "Kanaighat", "Osmaninagar", "Sylhet Sadar", "Zakiganj"]
        };

        // --- 2. FILL SEARCHABLE LIST ---
        const districtList = document.getElementById("district-list");
        const districtInput = document.getElementById("district-input");
        const upazilaSelect = document.getElementById("upazila-select");

        // Add all districts to the hidden datalist
        Object.keys(bdData).sort().forEach(district => {
            let option = document.createElement("option");
            option.value = district; // Use Name as value
            districtList.appendChild(option);
        });

        // --- 3. SMART LOADING LOGIC ---
        function loadUpazilas() {
            // Get what the user typed
            const val = districtInput.value;
            
            // Clear Upazila Box
            upazilaSelect.innerHTML = '<option value="">Select Area</option>';
            upazilaSelect.disabled = true;

            // If the typed name is a real District, load its areas
            if (bdData[val]) {
                upazilaSelect.disabled = false;
                
                bdData[val].sort().forEach(upazila => {
                    let option = document.createElement("option");
                    option.value = upazila;
                    option.text = upazila;
                    upazilaSelect.appendChild(option);
                });
            }
        }

        // --- 4. CHECKOUT LOGIC ---
        const form = document.getElementById('checkout-form');
        
        // Load Cart info
        const cart = JSON.parse(localStorage.getItem('myCart')) || [];
        let totalAmount = 0;
        let itemNames = [];
        cart.forEach(item => { totalAmount += item.price; itemNames.push(item.name); });
        
        document.getElementById('hidden-total').value = "$" + totalAmount.toFixed(2);
        document.getElementById('hidden-items').value = itemNames.join(", ");

        form.addEventListener('submit', e => {
            e.preventDefault();

            // Combine Code + Phone
            const number = document.getElementById('phone-number').value;
            document.getElementById('full-phone').value = "+880 " + number;

            // Change Button
            const btn = document.querySelector('button[type="submit"]');
            btn.innerHTML = "Processing...";
            btn.style.opacity = "0.7";

            // *** IMPORTANT: PASTE YOUR GOOGLE SCRIPT URL HERE ***
            const scriptURL = 'PASTE_YOUR_GOOGLE_SCRIPT_URL_HERE';

            fetch(scriptURL, { method: 'POST', body: new FormData(form), mode: 'no-cors'})
                .then(response => {
                    localStorage.removeItem('myCart');
                    window.location.href = "success.html";
                })
                .catch(error => {
                    alert("Error! " + error.message);
                    btn.innerHTML = "Try Again";
                    btn.style.opacity = "1";
                });
        });
    </script>

</body>
</html>
